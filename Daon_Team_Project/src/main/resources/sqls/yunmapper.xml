<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.min.edu.model.YunDaon_DaoImpl.yunwoo">

	<!-- 객관식 문제 조회 -->
	<select id="searchsel1" parameterType="java.util.Map" resultType="java.lang.String">
	SELECT DISTINCT(EXA_CODE) FROM D_EXAM 
   			JOIN D_CUREXA USING(EXA_CODE)
   			JOIN D_CURRICULUM USING(CUR_CODE)
      			WHERE SUB_CODE = #{sub_code} AND EXA_MEAN='S'		
	</select>
	<select id="searchsel2" parameterType="java.lang.String" resultType="examselectDto">
		SELECT EXA_CODE, CONTENT, FILENAME, COR_ANSWER, WRO_ONE, WRO_TWO, WRO_THREE 
			FROM (SELECT EXA_CODE, CONTENT, FILENAME, COR_ANSWER, WRO_ONE, WRO_TWO, WRO_THREE, ROWNUM RN FROM D_EXAMSELECT)
                           WHERE EXA_CODE IN
             <foreach close=")" separator="," open="(" item="exa_code" collection="exa_code_">#{exa_code}</foreach>
             AND RN BETWEEN #{start} AND #{end}
	</select>
	
	<!-- 서술형 문제 조회 -->
	<select id="searchdes1" parameterType="java.util.Map" resultType="java.lang.String">
	SELECT DISTINCT(EXA_CODE) FROM D_EXAM 
   			JOIN D_CUREXA USING(EXA_CODE)
   			JOIN D_CURRICULUM USING(CUR_CODE)
      			WHERE SUB_CODE = #{sub_code} AND EXA_MEAN='D'	
	</select>
	
	<select id="searchdes2" parameterType="java.lang.String" resultType="examdescDto">
		SELECT EXA_CODE, CONTENT, FILENAME, STANDARD
        	FROM(SELECT EXA_CODE, CONTENT, FILENAME, STANDARD, ROWNUM RN FROM D_EXAMDESCRIPTIVE)
                    WHERE EXA_CODE IN
             <foreach close=")" separator="," open="(" item="exa_code" collection="exa_code_">#{exa_code}</foreach>
             AND RN BETWEEN #{start} AND #{end}
	</select>
	
	
	
	<!-- 포트폴리오 문제 조회 -->
	<select id="searchport1" parameterType="java.util.Map" resultType="java.lang.String">
	SELECT DISTINCT(EXA_CODE) FROM D_EXAM 
   			JOIN D_CUREXA USING(EXA_CODE)
   			JOIN D_CURRICULUM USING(CUR_CODE)
      			WHERE SUB_CODE = #{sub_code} AND EXA_MEAN='P'		
	</select>
	
	<!-- 위에랑 똑같은 거 기분탓입니다. -->
	<select id="searchport2" parameterType="java.lang.String" resultType="examdescDto">
		SELECT EXA_CODE, CONTENT, FILENAME, STANDARD
        	FROM(SELECT EXA_CODE, CONTENT, FILENAME, STANDARD, ROWNUM RN FROM D_EXAMDESCRIPTIVE)
                     WHERE EXA_CODE IN
             <foreach close=")" separator="," open="(" item="exa_code" collection="exa_code_">#{exa_code}</foreach>
             AND RN BETWEEN #{start} AND #{end}
	</select>
	
	
	
</mapper>
